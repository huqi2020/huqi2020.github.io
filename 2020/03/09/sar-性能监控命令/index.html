<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="baidu-site-verification" content="093lY4ziMu" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="description" content="A hexo theme">
    <meta name="keyword"  content="dusign, hexo-theme-snail">
    <link rel="shortcut icon" href="/img/ironman-draw.png">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <!--<link href='http://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>-->
    <title>
        
          sar-性能监控命令 - Hexo-theme-snail
        
    </title>

    <link rel="canonical" href="https://dusign.net/2020/03/09/sar-性能监控命令/">

    <!-- Bootstrap Core CSS -->
    
<link rel="stylesheet" href="/css/bootstrap.min.css">


    <!-- Custom CSS --> 
    
        
<link rel="stylesheet" href="/css/dusign-light.css">

        
<link rel="stylesheet" href="/css/dusign-common-light.css">

        
<link rel="stylesheet" href="/css/font-awesome.css">

        
<link rel="stylesheet" href="/css/toc.css">

        <!-- background effects end -->
    
    
    <!-- Pygments Highlight CSS -->
    
<link rel="stylesheet" href="/css/highlight.css">


    
<link rel="stylesheet" href="/css/widget.css">


    
<link rel="stylesheet" href="/css/rocket.css">


    
<link rel="stylesheet" href="/css/signature.css">


    
<link rel="stylesheet" href="/css/fonts.googleapis.css">


    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">

    <!-- photography -->
    
<link rel="stylesheet" href="/css/photography.css">


    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 4.2.0"></head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- background effects start -->
    
    <!-- background effects end -->

	<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        
            
                background-image: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), url('snail-bg.jpg')
                /*post*/
            
        
    }
    
    #signature{
        background-image: url('/img/signature/dusign.png');
    }
    
</style>

<header class="intro-header" >
    <!-- Signature -->
    <div id="signature">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                
                    <div class="post-heading">
                        <div class="tags">
                            
                              <a class="tag" href="/tags/#Linux_command" title="Linux_command">Linux_command</a>
                            
                        </div>
                        <h1>sar-性能监控命令</h1>
                        <h2 class="subheading">Every man is his own hero.</h2>
                        <span class="meta">
                            Posted by (IT-胡齐) on
                            2020-03-09
                        </span>

                        
                            <div class="blank_box"></div>
                            <span class="meta">
                                Words <span class="post-count">2.9k</span> and
                                Reading Time <span class="post-count">12</span> Minutes
                            </span>
                            <div class="blank_box"></div>
                            <!-- 不蒜子统计 start -->
                            <span class="meta">
                                Viewed <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> Times
                            </span>
                            <!-- 不蒜子统计 end -->
                        

                    </div>
                

                </div>
            </div>
        </div>      
    </div>

    
    <div class="waveWrapper">
        <div class="wave wave_before" style="background-image: url('/img/wave-light.png')"></div>
        <div class="wave wave_after" style="background-image: url('/img/wave-light.png')"></div>
    </div>
    
</header>

	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">运维猫-胡齐</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    

                        
                    

                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/archive/">Archives</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/categories/">Categories</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/photography/">Photography</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    
                    
                    
                    <li>
                        <a href="https://blog.csdn.net/yunweimao" target="_blank">Chinese Blog</a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    <!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <h1 id="sar-性能监控命令"><a href="#sar-性能监控命令" class="headerlink" title="sar-性能监控命令"></a>sar-性能监控命令</h1><h2 id="1、简介"><a href="#1、简介" class="headerlink" title="1、简介"></a>1、简介</h2><p>在使用 Linux 系统时，常常会遇到各种各样的问题，比如系统容易死机或者运行速度突然变慢，这时我们常常猜测：是否硬盘空间不足，是否内存不足，是否 I/O 出现瓶颈，还是系统的核心参数出了问题？这时，我们应该考虑使用 sar 工具对系统做一个全面了解，分析系统的负载状况。</p>
<p>sar（System Activity Reporter）是系统活动情况报告的缩写。sar 工具将对系统当前的状态进行取样，然后通过计算数据和比例来表达系统的当前运行状态。它的特点是可以连续对系统取样，获得大量的取样数据；取样数据和分析的结果都可以存入文件，所需的负载很小。 sar 是目前 Linux 上最为全面的系统性能分析工具之一，可以从多方面对系统的活动进行报告，包括：文件的读写情况、系统调用的使用情况、磁盘I/O、CPU效率、内存使用状况、进程活动及IPC有关的活动等。为了提供不同的信息，sar 提供了丰富的选项、因此使用较为复杂。</p>
<h2 id="2、安装"><a href="#2、安装" class="headerlink" title="2、安装"></a>2、安装</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@RedHat_test ~]# yum install sysstat</span><br></pre></td></tr></table></figure>
<p>下面的命令启动服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@RedHat_test ~]# service sysstat start</span><br></pre></td></tr></table></figure>
<h2 id="3、sar命令常用格式"><a href="#3、sar命令常用格式" class="headerlink" title="3、sar命令常用格式"></a>3、sar命令常用格式</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@RedHat_test ~]# sar  [options]  [-A]  [-o file]  t  [n]</span><br><span class="line">t : 采样间隔</span><br><span class="line">n : 采样次数，默认值是1</span><br><span class="line">-o file : 将命令结果以二进制格式存放在文件中，file是文件名</span><br><span class="line">options : 命令行选项，sar命令常用选项如下：</span><br><span class="line">-A : 所有报告的总和</span><br><span class="line">-u : 输出CPU使用情况的统计信息</span><br><span class="line">-v : 输出inode、文件和其他内核表的统计信息</span><br><span class="line">-d : 输出每一个块设备的活动信息</span><br><span class="line">-r : 输出内存和交换空间的统计信息</span><br><span class="line">-b : 显示I/O的传送速率和统计信息</span><br><span class="line">-a : 文件读写情况</span><br><span class="line">-c : 输出进程统计信息，美妙创建的进程数</span><br><span class="line">-R : 输出内存页面的统计信息</span><br><span class="line">-y : 终端设备活动情况</span><br><span class="line">-w : 输出系统交换活动信息</span><br></pre></td></tr></table></figure>
<h2 id="4、CPU资源监控"><a href="#4、CPU资源监控" class="headerlink" title="4、CPU资源监控"></a>4、CPU资源监控</h2><p>例如：每10秒采样一次，连续采样3次，观察CPU的使用情况，并将采样结果以二进制形式存入当前目录下的文件test中</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[root@RedHat_test ~]# sar -u -o test 10 3</span><br><span class="line">Linux 3.10.0-957.el7.x86_64 (RedHat_test) 	2020年01月17日 	_x86_64_	(4 CPU)</span><br><span class="line">16时04分12秒     CPU     %user     %nice   %system   %iowait    %steal     %idle</span><br><span class="line">16时04分22秒     all      0.00      0.00      0.03      0.00      0.00     99.97</span><br><span class="line">16时04分32秒     all      0.03      0.00      0.00      0.00      0.00     99.97</span><br><span class="line">16时04分42秒     all      0.00      0.00      0.03      0.00      0.00     99.97</span><br><span class="line">平均时间:     all      0.01      0.00      0.02      0.00      0.00     99.97</span><br><span class="line">----------------------------------------------------------------------------------------</span><br><span class="line">CPU : all 表示统计信息为所有CPU的平均值</span><br><span class="line"><span class="meta">%</span><span class="bash">user : 显示用户级别（application）运行使用CPU总时间的百分比</span></span><br><span class="line"><span class="meta">%</span><span class="bash">nice : 显示用户级别，用于nice操作，所占用CPU总时间的百分比</span></span><br><span class="line"><span class="meta">%</span><span class="bash">system : 在核心级别（kernel）运行所使用CPU总时间的百分比</span></span><br><span class="line"><span class="meta">%</span><span class="bash">iowait : 显示用于等待I/O操作占用CPU总时间的百分比</span></span><br><span class="line"><span class="meta">%</span><span class="bash">steal : 管理程序（hypervisor）为另一个虚拟进程提供服务而等待虚拟CPU的百分比</span></span><br><span class="line"><span class="meta">%</span><span class="bash">idle : 显示CPU空闲时间占用CPU总时间的百分比。</span></span><br><span class="line">----------------------------------------------------------------------------------------</span><br><span class="line">1.若%iowait的值过高，表示硬盘存在I/O瓶颈</span><br><span class="line">2.若%idle的值高系统响应慢时，有可能是CPU等待分配内存，此时应加大内存容量</span><br><span class="line">3.若%idle的值持续低于1，则系统的CPU处理能力相对较低，表明系统中最需要解决的资源是CPU</span><br><span class="line">----------------------------------------------------------------------------------------</span><br><span class="line">如果要查看二进制文件test中的内容，需键入如下sar命令：</span><br><span class="line">[root@RedHat_test ~]# sar -u -f test </span><br><span class="line">Linux 3.10.0-957.el7.x86_64 (RedHat_test) 	2020年01月17日 	_x86_64_	(4 CPU)</span><br><span class="line"></span><br><span class="line">16时04分12秒     CPU     %user     %nice   %system   %iowait    %steal     %idle</span><br><span class="line">16时04分22秒     all      0.00      0.00      0.03      0.00      0.00     99.97</span><br><span class="line">16时04分32秒     all      0.03      0.00      0.00      0.00      0.00     99.97</span><br><span class="line">16时04分42秒     all      0.00      0.00      0.03      0.00      0.00     99.97</span><br><span class="line">平均时间:     all      0.01      0.00      0.02      0.00      0.00     99.97</span><br></pre></td></tr></table></figure>
<h2 id="5、inode、文件和其他内核表监控"><a href="#5、inode、文件和其他内核表监控" class="headerlink" title="5、inode、文件和其他内核表监控"></a>5、inode、文件和其他内核表监控</h2><p>例如：每10秒采样一次，连续采样3次，观察核心表的状态</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@RedHat_test ~]# sar -v 10 3</span><br><span class="line">Linux 3.10.0-957.el7.x86_64 (RedHat_test) 	2020年01月17日 	_x86_64_	(4 CPU)</span><br><span class="line">16时28分07秒 dentunusd   file-nr  inode-nr    pty-nr</span><br><span class="line">16时28分17秒     18074       896     21105         1</span><br><span class="line">16时28分27秒     18074       896     21105         1</span><br><span class="line">16时28分37秒     18074       896     21105         1</span><br><span class="line">平均时间:     18074       896     21105         1</span><br><span class="line">----------------------------------------------------------------------------------------</span><br><span class="line">dentunusd : 目录高速缓存中未被使用的条目数量</span><br><span class="line">file-nr : 文件句柄（file handle）的使用数量</span><br><span class="line">inode-nr : 索引节点句柄（inode handle）的使用数量</span><br><span class="line">pty-nr : 使用的pty数量</span><br></pre></td></tr></table></figure>
<h2 id="6、内存和交换空间监控"><a href="#6、内存和交换空间监控" class="headerlink" title="6、内存和交换空间监控"></a>6、内存和交换空间监控</h2><p>例如：每10秒采样一次，连续采样3次，监控内存和交换分区</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@RedHat_test ~]# sar -r 10 3</span><br><span class="line">Linux 3.10.0-957.el7.x86_64 (RedHat_test) 	2020年01月17日 	_x86_64_	(4 CPU)</span><br><span class="line">16时34分25秒 kbmemfree kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit  kbactive   kbinact   kbdirty</span><br><span class="line">16时34分35秒  15902672    363840      2.24      2108    137640    245052      1.33     95560     87300         0</span><br><span class="line">16时34分45秒  15902672    363840      2.24      2108    137640    245052      1.33     95560     87300         0</span><br><span class="line">16时34分55秒  15902672    363840      2.24      2108    137640    245052      1.33     95560     87300         0</span><br><span class="line">平均时间:  15902672    363840      2.24      2108    137640    245052      1.33     95560     87300         0</span><br><span class="line">----------------------------------------------------------------------------------------</span><br><span class="line">kbmemfree : 这个值和free命中的free值基本一致。所以它不包括buffer和cache的空间</span><br><span class="line">kbmemused : 这个值和free命令中的used值基本一致，所以它包括buffer和cache的空间</span><br><span class="line">memused : 这个值是kbmemused和内存总量（不包括swqp）的一个百分比</span><br><span class="line">kbbuffers 和 kbcached : 这两个值就是free命中的buffer和cache</span><br><span class="line">kbcommit : 保证当前系统所需要的内存，即为了确保不溢出而需要的内存（RAM+swap）</span><br><span class="line"><span class="meta">%</span><span class="bash">commit : 这个值是kbcommit与内存总量（包括swap）的一个百分比</span></span><br></pre></td></tr></table></figure>
<h2 id="7、内存分页监控"><a href="#7、内存分页监控" class="headerlink" title="7、内存分页监控"></a>7、内存分页监控</h2><p>例如：每10秒采样一次，连续采样3次，监控内存分页</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@RedHat_test ~]# sar -B 10 3</span><br><span class="line">Linux 3.10.0-957.el7.x86_64 (RedHat_test) 	2020年01月17日 	_x86_64_	(4 CPU)</span><br><span class="line"></span><br><span class="line">16时44分18秒  pgpgin/s pgpgout/s   fault/s  majflt/s  pgfree/s pgscank/s pgscand/s pgsteal/s    %vmeff</span><br><span class="line">16时44分28秒      0.00      0.00      3.80      0.00      8.80      0.00      0.00      0.00      0.00</span><br><span class="line">16时44分38秒      0.00      0.00      3.70      0.00      8.50      0.00      0.00      0.00      0.00</span><br><span class="line">16时44分48秒      0.00      0.00      2.90      0.00      8.50      0.00      0.00      0.00      0.00</span><br><span class="line">平均时间:      0.00      0.00      3.47      0.00      8.60      0.00      0.00      0.00      0.00</span><br><span class="line">----------------------------------------------------------------------------------------</span><br><span class="line">pgpgin/s : 表示每秒从磁盘或SWAP置换到内存的字节数（KB）</span><br><span class="line">pgpgout/s : 表示每秒从内存置换到磁盘或SWAP的字节数（KB）</span><br><span class="line">fault/s : 表示每秒系统产生的缺页数，即主缺页与次缺页之和（major+minor）</span><br><span class="line">majflt/s : 表示每秒钟产生的主缺页数</span><br><span class="line">pgfree/s : 每秒被放入空闲队列中的页个数</span><br><span class="line">pgscank/s : 每秒被kswapd扫描的页个数</span><br><span class="line">pgscand/s : 每秒直接被扫描的页个数</span><br><span class="line">pgsteal/s : 每秒钟从cache中被清除来满足内存需要的页个数</span><br><span class="line"><span class="meta">%</span><span class="bash">vmeff : 每秒清除的页（pgsteal）占总扫描页（pgscank+pgscand）的百分比</span></span><br></pre></td></tr></table></figure>
<h2 id="8、I-O和传送速率监控"><a href="#8、I-O和传送速率监控" class="headerlink" title="8、I/O和传送速率监控"></a>8、I/O和传送速率监控</h2><p>例如：每10秒采样一次，连续采样3次，报告缓冲区的使用情况</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@RedHat_test ~]# sar -b 10 3</span><br><span class="line">Linux 3.10.0-957.el7.x86_64 (RedHat_test) 	2020年01月17日 	_x86_64_	(4 CPU)</span><br><span class="line">17时03分12秒       tps      rtps      wtps   bread/s   bwrtn/s</span><br><span class="line">17时03分22秒      0.30      0.00      0.30      0.00      3.20</span><br><span class="line">17时03分32秒      0.60      0.00      0.60      0.00      4.80</span><br><span class="line">17时03分42秒      0.00      0.00      0.00      0.00      0.00</span><br><span class="line">平均时间:      0.30      0.00      0.30      0.00      2.67</span><br><span class="line">----------------------------------------------------------------------------------------</span><br><span class="line">tps : 每秒钟物理设备I/O传输总量</span><br><span class="line">rtps : 每秒钟从物理设备读入的数据总量</span><br><span class="line">wtps : 每秒钟向物理设备写入的数据总量</span><br><span class="line">bread/s : 每秒钟从物理设备读入的数据量，单位为 块/s</span><br><span class="line">bwrtn/s : 每秒钟从物理设备写入的数据量，单位为 块/s</span><br></pre></td></tr></table></figure>
<h2 id="9、进程队列长度和平均负载状态监控"><a href="#9、进程队列长度和平均负载状态监控" class="headerlink" title="9、进程队列长度和平均负载状态监控"></a>9、进程队列长度和平均负载状态监控</h2><p>例如：每10秒采样一次，连续采样3次，监控进程队列长度和平均负载状态</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@RedHat_test ~]# sar -q 10 3</span><br><span class="line">Linux 3.10.0-957.el7.x86_64 (RedHat_test) 	2020年01月17日 	_x86_64_	(4 CPU)</span><br><span class="line">17时09分34秒   runq-sz  plist-sz   ldavg-1   ldavg-5  ldavg-15   blocked</span><br><span class="line">17时09分44秒         1       124      0.00      0.01      0.05         0</span><br><span class="line">17时09分54秒         0       124      0.00      0.01      0.05         0</span><br><span class="line">17时10分04秒         1       127      0.00      0.01      0.05         0</span><br><span class="line">平均时间:         1       125      0.00      0.01      0.05         0</span><br><span class="line">------------------------------------------------------------------------------------------</span><br><span class="line">runq-sz : 运行队列的长度（等待运行的进程数）</span><br><span class="line">plist-sz : 进程列表中进程（processes）和线程（threads）的数量</span><br><span class="line">ldavg-1 : 最后1分钟的系统平均负载（System load average）</span><br><span class="line">ldavg-5 : 过去5分钟的系统平均负载</span><br><span class="line">ldavg-15 : 过去15分钟的系统平均负载</span><br></pre></td></tr></table></figure>
<h2 id="10、系统交换活动信息监控"><a href="#10、系统交换活动信息监控" class="headerlink" title="10、系统交换活动信息监控"></a>10、系统交换活动信息监控</h2><p>例如：每10秒采样一次，连续采样3次，监控系统交换活动信息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@RedHat_test ~]# sar -W 10 3</span><br><span class="line">Linux 3.10.0-957.el7.x86_64 (RedHat_test) 	2020年01月17日 	_x86_64_	(4 CPU)</span><br><span class="line">17时17分05秒  pswpin/s pswpout/s</span><br><span class="line">17时17分15秒      0.00      0.00</span><br><span class="line">17时17分25秒      0.00      0.00</span><br><span class="line">17时17分35秒      0.00      0.00</span><br><span class="line">平均时间:      0.00      0.00</span><br><span class="line">----------------------------------------------------------------------------------------</span><br><span class="line">pswpin/s : 每秒系统换入的交换页面（swap page）数量</span><br><span class="line">pswpout/s : 每秒系统换出的交换页面（swap page）数量</span><br></pre></td></tr></table></figure>
<h2 id="11、设备使用情况监控"><a href="#11、设备使用情况监控" class="headerlink" title="11、设备使用情况监控"></a>11、设备使用情况监控</h2><p>例如：每10秒采样一次，连续采样3次，报告设备使用情况</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">[root@RedHat_test ~]# sar -d 10 3 -p</span><br><span class="line">Linux 3.10.0-957.el7.x86_64 (RedHat_test) 	2020年01月17日 	_x86_64_	(4 CPU)</span><br><span class="line"></span><br><span class="line">17时41分31秒       DEV       tps  rd_sec/s  wr_sec/s  avgrq-sz  avgqu-sz     await     svctm     %util</span><br><span class="line">17时41分41秒       vda      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00</span><br><span class="line">17时41分41秒 centos-root      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00</span><br><span class="line">17时41分41秒 centos-swap      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00</span><br><span class="line"></span><br><span class="line">17时41分41秒       DEV       tps  rd_sec/s  wr_sec/s  avgrq-sz  avgqu-sz     await     svctm     %util</span><br><span class="line">17时41分51秒       vda      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00</span><br><span class="line">17时41分51秒 centos-root      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00</span><br><span class="line">17时41分51秒 centos-swap      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00</span><br><span class="line"></span><br><span class="line">17时41分51秒       DEV       tps  rd_sec/s  wr_sec/s  avgrq-sz  avgqu-sz     await     svctm     %util</span><br><span class="line">17时42分01秒       vda      0.30      0.00      0.30      1.00      0.03    112.00    103.67      3.11</span><br><span class="line">17时42分01秒 centos-root      0.20      0.00      0.30      1.50      0.03    168.00    168.00      3.36</span><br><span class="line">17时42分01秒 centos-swap      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00</span><br><span class="line"></span><br><span class="line">平均时间:       DEV       tps  rd_sec/s  wr_sec/s  avgrq-sz  avgqu-sz     await     svctm     %util</span><br><span class="line">平均时间:       vda      0.10      0.00      0.10      1.00      0.01    112.00    103.67      1.04</span><br><span class="line">平均时间: centos-root      0.07      0.00      0.10      1.50      0.01    168.00    168.00      1.12</span><br><span class="line">平均时间: centos-swap      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00</span><br><span class="line">-----------------------------------------------------------------------------------------</span><br><span class="line">-p : 可以打印出vda、centos-root、centos-swap等磁盘设备名称，如果不用参数-p，设备节点则有可能是别的</span><br><span class="line">tps : 每秒从物理磁盘I/O的次数，多个逻辑请求会被合并为一个I/O磁盘请求，一次传输的大小是不确定的。</span><br><span class="line">rd_sec/s : 每秒读扇区的次数</span><br><span class="line">wr_sec/s : 每秒写扇区的次数</span><br><span class="line">avgrp-sz : 平均每次设备I/O操作的数据大小（扇区）</span><br><span class="line">avgqu-sz : 磁盘请求队列的平均长度</span><br><span class="line">await : 从请求磁盘操作到系统完成处理，每次请求的平均消耗时间，包括请求队列等待时间，单位是毫秒（1秒=1000毫秒）</span><br><span class="line">svctm : 系统处理每次请求的平均时间，不包括在请求队列中消耗的时间</span><br></pre></td></tr></table></figure>

                
                <hr>
                <!-- Pager -->
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2020/03/09/docker-nextcloud搭建私有同步网盘/" data-toggle="tooltip" data-placement="top" title="docker-nextcloud搭建私有同步网盘">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2020/03/07/bc-数字计算器/" data-toggle="tooltip" data-placement="top" title="bc—数字计算器">Next Post &rarr;</a>
                    </li>
                    
                </ul>

                <!-- tip start -->
                

                
                <div class="comment_notes">
                    <p>
                        This is copyright.
                    </p>
                </div>
                
                <!-- tip end -->

                <!-- Music start-->
                
                

<link rel="stylesheet" href="/css/music-player/fonts/iconfont.css">


<link rel="stylesheet" href="/css/music-player/css/reset.css">


<link rel="stylesheet" href="/css/music-player/css/player.css">



<div class="music-player">
    <audio class="music-player__audio" ></audio>
    <div class="music-player__main">
        <div class="music-player__blur"></div>
        <div class="music-player__disc">
            <div class="music-player__image">
                <img width="100%" src="" alt="">
            </div>
            <div class="music-player__pointer"><img width="100%" src="/img/cd_tou.png" alt=""></div>
        </div>
        <div class="music-player__controls">
            <div class="music__info">
                <h3 class="music__info--title">...</h3>
                <p class="music__info--singer">...</p>
            </div>
            <div class="player-control">
                <div class="player-control__content">
                    <div class="player-control__btns">
                        <div class="player-control__btn player-control__btn--prev"><i class="iconfont icon-prev"></i></div>
                        <div class="player-control__btn player-control__btn--play"><i class="iconfont icon-play"></i></div>
                        <div class="player-control__btn player-control__btn--next"><i class="iconfont icon-next"></i></div>
                        <div class="player-control__btn player-control__btn--mode"><i class="iconfont icon-loop"></i></div>
                    </div>
                    <div class="player-control__volume">
                        <div class="control__volume--icon player-control__btn"><i class="iconfont icon-volume"></i></div>
                        <div class="control__volume--progress player_progress"></div>
                    </div>
                </div>
                <div class="player-control__content">
                    <div class="player__song--progress player_progress"></div>
                    <div class="player__song--timeProgess nowTime">00:00</div>
                    <div class="player__song--timeProgess totalTime">00:00</div>
                </div>

            </div>

        </div>
    </div>
</div>


<script src="/js/music-player/utill.js"></script>


<script src="/js/music-player/jquery.min.js"></script>


<script src="/js/music-player/player.js"></script>


                
                <!-- Music end -->

                <!-- Sharing -->
                
                <div class="social-share"  data-wechat-qrcode-helper="" align="center"></div>
                <!--  css & js -->
                <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
                <script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
                
                <!-- Sharing -->

                <!-- gitment start -->
                
                <!-- gitment end -->

                <!-- 来必力City版安装代码 -->
                
                <!-- City版安装代码已完成 -->

                <!-- disqus comment start -->
                
                <!-- disqus comment end -->
            </div>
            
            <!-- Tabe of Content -->
            <!-- Table of Contents -->

    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#sar-性能监控命令"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">sar-性能监控命令</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#1、简介"><span class="toc-nav-number">1.1.</span> <span class="toc-nav-text">1、简介</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#2、安装"><span class="toc-nav-number">1.2.</span> <span class="toc-nav-text">2、安装</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#3、sar命令常用格式"><span class="toc-nav-number">1.3.</span> <span class="toc-nav-text">3、sar命令常用格式</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#4、CPU资源监控"><span class="toc-nav-number">1.4.</span> <span class="toc-nav-text">4、CPU资源监控</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#5、inode、文件和其他内核表监控"><span class="toc-nav-number">1.5.</span> <span class="toc-nav-text">5、inode、文件和其他内核表监控</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#6、内存和交换空间监控"><span class="toc-nav-number">1.6.</span> <span class="toc-nav-text">6、内存和交换空间监控</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#7、内存分页监控"><span class="toc-nav-number">1.7.</span> <span class="toc-nav-text">7、内存分页监控</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#8、I-O和传送速率监控"><span class="toc-nav-number">1.8.</span> <span class="toc-nav-text">8、I&#x2F;O和传送速率监控</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#9、进程队列长度和平均负载状态监控"><span class="toc-nav-number">1.9.</span> <span class="toc-nav-text">9、进程队列长度和平均负载状态监控</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#10、系统交换活动信息监控"><span class="toc-nav-number">1.10.</span> <span class="toc-nav-text">10、系统交换活动信息监控</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#11、设备使用情况监控"><span class="toc-nav-number">1.11.</span> <span class="toc-nav-text">11、设备使用情况监控</span></a></li></ol></li></ol>
        
        </div>
      </aside>
    

                
            <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#Linux_command" title="Linux_command">Linux_command</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
                <hr>
                <h5>FRIENDS</h5>
                <ul class="list-inline">

                    
                        <li><a href="https://blog.csdn.net/yunweimao" target="_blank">Dusign&#39;s Huqi</a></li>
                    
                        <li><a href="#" target="_blank">Dusign&#39;s Web</a></li>
                    
                        <li><a href="https://github.com/huqi2020" target="_blank">Dusign&#39;s Github</a></li>
                    
                        <li><a href="#" target="_blank">Other</a></li>
                    
                </ul>
                
            </div>
        </div>
    </div>
</article>




<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'left',
          icon: 'ℬ'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>


<style  type="text/css">
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">

                
                    <li>
                        <a target="_blank"  href="https://github.com/huqi2020">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="https://twitter.com/Hu Qi">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="https://www.facebook.com/Hu Qi">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="https://www.zhihu.com/people/qi-qi-8-34-58">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa  fa-stack-1x fa-inverse">知</i>
                            </span>
                        </a>
                    </li>
                

                

                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; (IT-胡齐) 2020 
                    <br>
                    Powered by 
                    <a href="https://github.com/dusign/hexo-theme-snail" target="_blank" rel="noopener">
                        <i>hexo-theme-snail</i>
                    </a> | 
                    <iframe style="margin-left: 2px; margin-bottom:-5px;" frameborder="0" scrolling="0"
                        width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=dusign&repo=hexo-theme-snail&type=star&count=true">
                    </iframe>
                </p>
            </div>
        </div>
    </div>

</footer>

<!-- jQuery -->

<script src="/js/jquery.min.js"></script>


<!-- Bootstrap Core JavaScript -->

<script src="/js/bootstrap.min.js"></script>


<!-- Custom Theme JavaScript -->

<script src="/js/hux-blog.min.js"></script>


<!-- Search -->

<script src="/js/search.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("https://dusign.net/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->


<script>
    // dynamic User by Hux
    var _gaId = 'UA-XXXXXXXX-X';
    var _gaDomain = 'yoursite';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>




<!-- Baidu Tongji -->


<!-- Search -->

    <script type="text/javascript">      
        var search_path = "search.xml";
        if (search_path.length == 0) {
            search_path = "search.xml";
        }
    var path = "/" + search_path;
    searchFunc(path, 'local-search-input', 'local-search-result');
    </script>


<!-- busuanzi -->
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>






	<a id="rocket" href="#top" class=""></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>

    
        <!-- background effects line -->
        

        
            <script type="text/javascript" src="/js/mouse-click.js" content='[&quot;🌱&quot;,&quot;just do it&quot;,&quot;🍀&quot;]' color='[&quot;rgb(121,93,179)&quot; ,&quot;rgb(76,180,231)&quot; ,&quot;rgb(184,90,154)&quot;]'></script>
        

        <!-- background effects end -->
    

    <!--<script size="50" alpha='0.3' zIndex="-999" src="/js/ribbonStatic.js"></script>-->
    
        <script src="/js/ribbonDynamic.js"></script>
    
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>

</html>
