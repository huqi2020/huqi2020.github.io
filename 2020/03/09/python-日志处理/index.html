<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="baidu-site-verification" content="093lY4ziMu" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="description" content="A hexo theme">
    <meta name="keyword"  content="dusign, hexo-theme-snail">
    <link rel="shortcut icon" href="/img/ironman-draw.png">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <!--<link href='http://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>-->
    <title>
        
          python-日志处理 - Hexo-theme-snail
        
    </title>

    <link rel="canonical" href="https://dusign.net/2020/03/09/python-日志处理/">

    <!-- Bootstrap Core CSS -->
    
<link rel="stylesheet" href="/css/bootstrap.min.css">


    <!-- Custom CSS --> 
    
        
<link rel="stylesheet" href="/css/dusign-light.css">

        
<link rel="stylesheet" href="/css/dusign-common-light.css">

        
<link rel="stylesheet" href="/css/font-awesome.css">

        
<link rel="stylesheet" href="/css/toc.css">

        <!-- background effects end -->
    
    
    <!-- Pygments Highlight CSS -->
    
<link rel="stylesheet" href="/css/highlight.css">


    
<link rel="stylesheet" href="/css/widget.css">


    
<link rel="stylesheet" href="/css/rocket.css">


    
<link rel="stylesheet" href="/css/signature.css">


    
<link rel="stylesheet" href="/css/fonts.googleapis.css">


    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">

    <!-- photography -->
    
<link rel="stylesheet" href="/css/photography.css">


    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 4.2.0"></head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- background effects start -->
    
    <!-- background effects end -->

	<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        
            
                background-image: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), url('snail-bg.jpg')
                /*post*/
            
        
    }
    
    #signature{
        background-image: url('/img/signature/dusign.png');
    }
    
</style>

<header class="intro-header" >
    <!-- Signature -->
    <div id="signature">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                
                    <div class="post-heading">
                        <div class="tags">
                            
                              <a class="tag" href="/tags/#Linux_python" title="Linux_python">Linux_python</a>
                            
                        </div>
                        <h1>python-日志处理</h1>
                        <h2 class="subheading">Every man is his own hero.</h2>
                        <span class="meta">
                            Posted by (IT-胡齐) on
                            2020-03-09
                        </span>

                        
                            <div class="blank_box"></div>
                            <span class="meta">
                                Words <span class="post-count">3.9k</span> and
                                Reading Time <span class="post-count">17</span> Minutes
                            </span>
                            <div class="blank_box"></div>
                            <!-- 不蒜子统计 start -->
                            <span class="meta">
                                Viewed <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> Times
                            </span>
                            <!-- 不蒜子统计 end -->
                        

                    </div>
                

                </div>
            </div>
        </div>      
    </div>

    
    <div class="waveWrapper">
        <div class="wave wave_before" style="background-image: url('/img/wave-light.png')"></div>
        <div class="wave wave_after" style="background-image: url('/img/wave-light.png')"></div>
    </div>
    
</header>

	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">运维猫-胡齐</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    

                        
                    

                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/archive/">Archives</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/categories/">Categories</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/photography/">Photography</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    
                    
                    
                    <li>
                        <a href="https://blog.csdn.net/yunweimao" target="_blank">Chinese Blog</a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    <!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>日志是一种可以追踪某些软件运行时所发生事件的方法。软件开发人员可以向他们的代码中调用日志记录相关的方法来表明发生了某些事情。一个事件可以用一个可包含可选变量数据的消息来描述。此外，事件也有重要性的概念，这个重要性也可以被称为严重性级别（level）。</p>
<h2 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h2><p>通过log的分析，可以方便用户了解系统或软件、应用的运行情况；如果你的应用log足够丰富，也可以分析以往用户的操作行为、类型喜好、地域分布或其他更多信息；如果一个应用的log同时也分了多个级别，那么可以很轻易地分析得到该应用的健康状况，及时发现问题并快速定位、解决问题，补救损失。<br>简单来讲就是，我们通过记录和分析日志可以了解一个系统或软件程序运行情况是否正常，也可以在应用程序出现故障时快速定位问题。比如，做运维的同学，在接收到报警或各种问题反馈后，进行问题排查时通常都会先去看各种日志，大部分问题都可以在日志中找到答案。再比如，做开发的同学，可以通过IDE控制台上输出的各种日志进行程序调试。对于运维老司机或者有经验的开发人员，可以快速的通过日志定位到问题的根源。可见，日志的重要性不可小觑。日志的作用可以简单总结为以下3点：</p>
<ul>
<li>程序调试</li>
<li>了解软件程序运行情况，是否正常</li>
<li>软件程序运行故障分析与问题定位</li>
</ul>
<p>如果应用的日志信息足够详细和丰富，还可以用来做用户行为分析，如：分析用户的操作行为、类型洗好、地域分布以及其它更多的信息，由此可以实现改进业务、提高商业利益。</p>
<h2 id="Logging工作流程"><a href="#Logging工作流程" class="headerlink" title="Logging工作流程"></a>Logging工作流程</h2><h3 id="logging模块使用过程"><a href="#logging模块使用过程" class="headerlink" title="logging模块使用过程"></a>logging模块使用过程</h3><p>1.第一次导入logging模块或使用reload函数重新导入logging模块，logging模块中的代码将被执行，这个过程中将产生logging日志系统的默认配置。</p>
<p>2.自定义配置(可选)。logging标准模块支持三种配置方式: dictConfig，fileConfig，listen。其中，dictConfig是通过一个字典进行配置Logger，Handler，Filter，Formatter；fileConfig则是通过一个文件进行配置；而listen则监听一个网络端口，通过接收网络数据来进行配置。当然，除了以上集体化配置外，也可以直接调用Logger，Handler等对象中的方法在代码中来显式配置。</p>
<p>3.使用logging模块的全局作用域中的getLogger函数来得到一个Logger对象实例(其参数即是一个字符串，表示Logger对象实例的名字，即通过该名字来得到相应的Logger对象实例)。</p>
<p>4.使用Logger对象中的debug，info，error，warn，critical等方法记录日志信息。</p>
<h3 id="logging模块处理流程"><a href="#logging模块处理流程" class="headerlink" title="logging模块处理流程"></a>logging模块处理流程</h3><p><img src="640.jpeg" alt="python-日志处理"></p>
<p>1.判断日志的等级是否大于Logger对象的等级，如果大于，则往下执行，否则，流程结束。</p>
<p>2.产生日志。第一步，判断是否有异常，如果有，则添加异常信息。第二步，处理日志记录方法(如debug，info等)中的占位符，即一般的字符串格式化处理。</p>
<p>3.使用注册到Logger对象中的Filters进行过滤。如果有多个过滤器，则依次过滤；只要有一个过滤器返回假，则过滤结束，且该日志信息将丢弃，不再处理，而处理流程也至此结束。否则，处理流程往下执行。</p>
<p>4.在当前Logger对象中查找Handlers，如果找不到任何Handler，则往上到该Logger对象的父Logger中查找；如果找到一个或多个Handler，则依次用Handler来处理日志信息。但在每个Handler处理日志信息过程中，会首先判断日志信息的等级是否大于该Handler的等级，如果大于，则往下执行(由Logger对象进入Handler对象中)，否则，处理流程结束。</p>
<p>5.执行Handler对象中的filter方法，该方法会依次执行注册到该Handler对象中的Filter。如果有一个Filter判断该日志信息为假，则此后的所有Filter都不再执行，而直接将该日志信息丢弃，处理流程结束。</p>
<p>6.使用Formatter类格式化最终的输出结果。 注：Formatter同上述第2步的字符串格式化不同，它会添加额外的信息，比如日志产生的时间，产生日志的源代码所在的源文件的路径等等。</p>
<p>7.真正地输出日志信息(到网络，文件，终端，邮件等)。至于输出到哪个目的地，由Handler的种类来决定。</p>
<h2 id="日志等级"><a href="#日志等级" class="headerlink" title="日志等级"></a>日志等级</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">级别	          日志函数	                 描述</span><br><span class="line">DEBUG     	logging.debug()     	最低级别，追踪问题时使用</span><br><span class="line">INFO      	logging.info()	      记录程序中一般事件的信息，或确认一切工作正常</span><br><span class="line">WARNING	    logging.warning()	    记录信息，用于警告</span><br><span class="line">ERROR	      logging.error()	      用于记录程序报错信息</span><br><span class="line">CRITICAL	  logging.critical()	  最高级别，记录可能导致程序崩溃的错误</span><br></pre></td></tr></table></figure>
<h2 id="日志格式允许的字段"><a href="#日志格式允许的字段" class="headerlink" title="日志格式允许的字段"></a>日志格式允许的字段</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">    格式	                            描述</span><br><span class="line">%(levelno)s                   	打印日志级别的数值</span><br><span class="line">%(levelname)s	                  打印日志级别名称</span><br><span class="line">%(pathname)s	                  打印当前执行程序的路径</span><br><span class="line">%(filename)s	                  打印当前执行程序名称</span><br><span class="line">%(funcName)s	                  打印日志的当前函数</span><br><span class="line">%(lineno)d	                    打印日志的当前行号</span><br><span class="line">%(asctime)s	                    打印日志的时间</span><br><span class="line">%(thread)d	                    打印线程id</span><br><span class="line">%(threadName)s	                打印线程名称</span><br><span class="line">%(process)d	                    打印进程ID</span><br><span class="line">%(message)s	                    打印日志信息</span><br></pre></td></tr></table></figure>
<h2 id="简单应用"><a href="#简单应用" class="headerlink" title="简单应用"></a>简单应用</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line">logging.debug(<span class="string">'debug message'</span>)</span><br><span class="line">logging.info(<span class="string">'info message'</span>)</span><br><span class="line">logging.warning(<span class="string">'warning message'</span>)</span><br><span class="line">logging.error(<span class="string">'error message'</span>)</span><br><span class="line">logging.critical(<span class="string">'critical message'</span>)</span><br><span class="line">----------------------------------------------------------------------------------------</span><br><span class="line">WARNING:root:warning message</span><br><span class="line">ERROR:root:error message</span><br><span class="line">CRITICAL:root:critical message</span><br></pre></td></tr></table></figure>
<p>可见，默认情况下<a href="http://lib.csdn.net/base/11" target="_blank" rel="noopener">Python</a>的logging模块将日志打印到了标准输出中，且只显示了大于等于WARNING级别的日志，这说明默认的日志级别设置为WARNING（日志级别等级CRITICAL &gt; ERROR &gt; WARNING &gt; INFO &gt; DEBUG &gt; NOTSET）</p>
<h2 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ! /usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*</span></span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">import</span> logging.handlers</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置日志格式</span></span><br><span class="line">fmt = <span class="string">'%(asctime)s %(levename)7.7s %(funcName)s: %(message)s'</span></span><br><span class="line">formatter = logging.Formatter(fmt, datefmt=<span class="string">"%Y-%m-%d %H:%M:%S"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置 handler</span></span><br><span class="line">handler = logging.handlers.TimedRotatingFileHandler(<span class="string">'myapp.log'</span>,when=<span class="string">'D'</span>,backupCount=<span class="number">30</span>)</span><br><span class="line">handler.setFormatter(formatter)</span><br><span class="line"></span><br><span class="line"><span class="comment">#定义 logger对象</span></span><br><span class="line">logger = logging.getLogger(<span class="string">"MyApp"</span>)</span><br><span class="line">logger.addHandler(handler)</span><br><span class="line">logger.setLevel(logging.INFO)</span><br></pre></td></tr></table></figure>
<h2 id="灵活配置日志格式（多次运行会被覆盖）"><a href="#灵活配置日志格式（多次运行会被覆盖）" class="headerlink" title="灵活配置日志格式（多次运行会被覆盖）"></a>灵活配置日志格式（多次运行会被覆盖）</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line">logging.basicConfig(level=logging.DEBUG,</span><br><span class="line">                    format=<span class="string">'%(asctime)s %(filename)s[line:%(lineno)d] %(levelname)s %(message)s'</span>,</span><br><span class="line">                    datefmt=<span class="string">'%a, %d %b %Y %H:%M:%S'</span>,</span><br><span class="line">                    filename=<span class="string">'/root/log/test.log'</span>,</span><br><span class="line">                    filemode=<span class="string">'w'</span>)</span><br><span class="line"></span><br><span class="line">logging.debug(<span class="string">'debug message'</span>)</span><br><span class="line">logging.info(<span class="string">'info message'</span>)</span><br><span class="line">logging.warning(<span class="string">'warning message'</span>)</span><br><span class="line">logging.error(<span class="string">'error message'</span>)</span><br><span class="line">logging.critical(<span class="string">'critical message'</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@RedHat_test log]<span class="comment"># cat test.log </span></span><br><span class="line">Tue, <span class="number">25</span> Feb <span class="number">2020</span> <span class="number">14</span>:<span class="number">17</span>:<span class="number">41</span> <span class="number">2.</span>py[line:<span class="number">8</span>] DEBUG debug message</span><br><span class="line">Tue, <span class="number">25</span> Feb <span class="number">2020</span> <span class="number">14</span>:<span class="number">17</span>:<span class="number">41</span> <span class="number">2.</span>py[line:<span class="number">9</span>] INFO info message</span><br><span class="line">Tue, <span class="number">25</span> Feb <span class="number">2020</span> <span class="number">14</span>:<span class="number">17</span>:<span class="number">41</span> <span class="number">2.</span>py[line:<span class="number">10</span>] WARNING warning message</span><br><span class="line">Tue, <span class="number">25</span> Feb <span class="number">2020</span> <span class="number">14</span>:<span class="number">17</span>:<span class="number">41</span> <span class="number">2.</span>py[line:<span class="number">11</span>] ERROR error message</span><br><span class="line">Tue, <span class="number">25</span> Feb <span class="number">2020</span> <span class="number">14</span>:<span class="number">17</span>:<span class="number">41</span> <span class="number">2.</span>py[line:<span class="number">12</span>] CRITICAL critical message</span><br></pre></td></tr></table></figure>
<h2 id="logging库Formatter组件"><a href="#logging库Formatter组件" class="headerlink" title="logging库Formatter组件"></a>logging库Formatter组件</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"></span><br><span class="line">logger = logging.getLogger()</span><br><span class="line"><span class="comment"># 创建一个handler，用于写入日志文件</span></span><br><span class="line">fh = logging.FileHandler(<span class="string">'test.log'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 再创建一个handler，用于输出到控制台</span></span><br><span class="line">ch = logging.StreamHandler()</span><br><span class="line"></span><br><span class="line">formatter = logging.Formatter(<span class="string">'%(asctime)s - %(name)s - %(levelname)s - %(message)s'</span>)</span><br><span class="line"></span><br><span class="line">fh.setFormatter(formatter)</span><br><span class="line">ch.setFormatter(formatter)</span><br><span class="line"></span><br><span class="line">logger.addHandler(fh) <span class="comment">#logger对象可以添加多个fh和ch对象</span></span><br><span class="line">logger.addHandler(ch)</span><br><span class="line"></span><br><span class="line">logger.debug(<span class="string">'logger debug message'</span>)</span><br><span class="line">logger.info(<span class="string">'logger info message'</span>)</span><br><span class="line">logger.warning(<span class="string">'logger warning message'</span>)</span><br><span class="line">logger.error(<span class="string">'logger error message'</span>)</span><br><span class="line">logger.critical(<span class="string">'logger critical message'</span>)</span><br><span class="line">----------------------------------------------------------------------------------------</span><br><span class="line"><span class="number">2020</span><span class="number">-02</span><span class="number">-25</span> <span class="number">14</span>:<span class="number">33</span>:<span class="number">10</span>,<span class="number">717</span> - root - WARNING - logger warning message</span><br><span class="line"><span class="number">2020</span><span class="number">-02</span><span class="number">-25</span> <span class="number">14</span>:<span class="number">33</span>:<span class="number">10</span>,<span class="number">717</span> - root - ERROR - logger error message</span><br><span class="line"><span class="number">2020</span><span class="number">-02</span><span class="number">-25</span> <span class="number">14</span>:<span class="number">33</span>:<span class="number">10</span>,<span class="number">717</span> - root - CRITICAL - logger critical message</span><br><span class="line">logging库提供了多个组件：Logger、Handler、Filter、Formatter。Logger对象提供应用程序可直接使用的接口，Handler发送日志到适当的目的地，Filter提供了过滤日志信息的方法，Formatter指定日志显示格式。从这个输出可以看出logger = logging.getLogger()返回的Logger名为root。这里没有用logger.setLevel(logging.Debug)显示的为logger设置日志级别，所以使用默认的日志级别WARNIING，故结果只输出了大于等于WARNIING级别的信息。</span><br></pre></td></tr></table></figure>
<h2 id="创建两个logger对象"><a href="#创建两个logger对象" class="headerlink" title="创建两个logger对象"></a>创建两个logger对象</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ! /usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*</span></span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">import</span> logging.handlers</span><br><span class="line">fh = logging.FileHandler(<span class="string">'test.log'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置日志格式</span></span><br><span class="line">ch = logging.StreamHandler()</span><br><span class="line">formatter = logging.Formatter(<span class="string">'%(asctime)s - %(name)s - %(levelname)s - %(message)s'</span>)</span><br><span class="line">fh.setFormatter(formatter)</span><br><span class="line">ch.setFormatter(formatter)</span><br><span class="line"></span><br><span class="line"><span class="comment">#定义 logger对象</span></span><br><span class="line">logger1 = logging.getLogger(<span class="string">'logger'</span>)</span><br><span class="line">logger1.setLevel(logging.DEBUG)</span><br><span class="line"></span><br><span class="line">logger2 = logging.getLogger(<span class="string">'mylogger'</span>)</span><br><span class="line">logger2.setLevel(logging.INFO)</span><br><span class="line"></span><br><span class="line">logger1.addHandler(fh)</span><br><span class="line">logger1.addHandler(ch)</span><br><span class="line"></span><br><span class="line">logger2.addHandler(fh)</span><br><span class="line">logger2.addHandler(ch)</span><br><span class="line"></span><br><span class="line">logger1.debug(<span class="string">'logger1 debug message'</span>)</span><br><span class="line">logger1.info(<span class="string">'logger1 info message'</span>)</span><br><span class="line">logger1.warning(<span class="string">'logger1 warning message'</span>)</span><br><span class="line">logger1.error(<span class="string">'logger1 error message'</span>)</span><br><span class="line">logger1.critical(<span class="string">'logger1 critical message'</span>)</span><br><span class="line"></span><br><span class="line">logger2.debug(<span class="string">'logger2 debug message'</span>)</span><br><span class="line">logger2.info(<span class="string">'logger2 info message'</span>)</span><br><span class="line">logger2.warning(<span class="string">'logger2 warning message'</span>)</span><br><span class="line">logger2.error(<span class="string">'logger2 error message'</span>)</span><br><span class="line">logger2.critical(<span class="string">'logger2 critical message'</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@RedHat_test log]<span class="comment"># cat test.log </span></span><br><span class="line"><span class="number">2020</span><span class="number">-02</span><span class="number">-25</span> <span class="number">15</span>:<span class="number">02</span>:<span class="number">27</span>,<span class="number">366</span> - logger - DEBUG - logger1 debug message</span><br><span class="line"><span class="number">2020</span><span class="number">-02</span><span class="number">-25</span> <span class="number">15</span>:<span class="number">02</span>:<span class="number">27</span>,<span class="number">367</span> - logger - INFO - logger1 info message</span><br><span class="line"><span class="number">2020</span><span class="number">-02</span><span class="number">-25</span> <span class="number">15</span>:<span class="number">02</span>:<span class="number">27</span>,<span class="number">367</span> - logger - WARNING - logger1 warning message</span><br><span class="line"><span class="number">2020</span><span class="number">-02</span><span class="number">-25</span> <span class="number">15</span>:<span class="number">02</span>:<span class="number">27</span>,<span class="number">367</span> - logger - ERROR - logger1 error message</span><br><span class="line"><span class="number">2020</span><span class="number">-02</span><span class="number">-25</span> <span class="number">15</span>:<span class="number">02</span>:<span class="number">27</span>,<span class="number">367</span> - logger - CRITICAL - logger1 critical message</span><br><span class="line"><span class="number">2020</span><span class="number">-02</span><span class="number">-25</span> <span class="number">15</span>:<span class="number">02</span>:<span class="number">27</span>,<span class="number">367</span> - mylogger - INFO - logger2 info message</span><br><span class="line"><span class="number">2020</span><span class="number">-02</span><span class="number">-25</span> <span class="number">15</span>:<span class="number">02</span>:<span class="number">27</span>,<span class="number">367</span> - mylogger - WARNING - logger2 warning message</span><br><span class="line"><span class="number">2020</span><span class="number">-02</span><span class="number">-25</span> <span class="number">15</span>:<span class="number">02</span>:<span class="number">27</span>,<span class="number">367</span> - mylogger - ERROR - logger2 error message</span><br><span class="line"><span class="number">2020</span><span class="number">-02</span><span class="number">-25</span> <span class="number">15</span>:<span class="number">02</span>:<span class="number">27</span>,<span class="number">367</span> - mylogger - CRITICAL - logger2 critical message</span><br><span class="line">----------------------------------------------------------------------------------------</span><br><span class="line"><span class="number">1.</span>我们明明通过logger1.setLevel(logging.DEBUG)将logger1的日志级别设置为了DEBUG，为何显示的时候没有显示出DEBUG级别的日志信息，而是从INFO级别的日志开始显示呢？</span><br><span class="line">原来logger1和logger2对应的是同一个Logger实例，只要logging.getLogger（name）中名称参数name相同则返回的Logger实例就是同一个，且仅有一个，也即name与Logger实例一一对应。在logger2实例中通过logger2.setLevel(logging.INFO)设置mylogger的日志级别为logging.INFO，所以最后logger1的输出遵从了后来设置的日志级别。</span><br><span class="line">2.为什么logger1、logger2对应的每个输出分别显示两次?</span><br><span class="line">这是因为我们通过logger = logging.getLogger()显示的创建了root Logger，而logger1 = logging.getLogger(<span class="string">'mylogger'</span>)创建了root Logger的孩子(root.)mylogger,logger2同样。而孩子,孙子，重孙……既会将消息分发给他的handler进行处理也会传递给所有的祖先Logger处理。</span><br></pre></td></tr></table></figure>
<h2 id="写入配置文件"><a href="#写入配置文件" class="headerlink" title="写入配置文件"></a>写入配置文件</h2><h3 id="定义一个-yaml-配置文件"><a href="#定义一个-yaml-配置文件" class="headerlink" title="定义一个 yaml 配置文件"></a>定义一个 yaml 配置文件</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 文件名：config.yaml</span></span><br><span class="line">version: <span class="number">1</span></span><br><span class="line">formatters:</span><br><span class="line">  brief:</span><br><span class="line">    format: <span class="string">"%(asctime)s - %(message)s"</span></span><br><span class="line">  simple:</span><br><span class="line">    format: <span class="string">"%(asctime)s - %(name)s - %(levelname)s - %(message)s"</span></span><br><span class="line">handlers:</span><br><span class="line">  console:</span><br><span class="line">    <span class="class"><span class="keyword">class</span> :</span> logging.StreamHandler</span><br><span class="line">    formatter: brief</span><br><span class="line">    level   : INFO</span><br><span class="line">    stream  : ext://sys.stdout</span><br><span class="line">  file:</span><br><span class="line">    <span class="class"><span class="keyword">class</span> :</span> logging.FileHandler</span><br><span class="line">    formatter: simple</span><br><span class="line">    level: DEBUG</span><br><span class="line">    filename: debug.log</span><br><span class="line">  error:</span><br><span class="line">    <span class="class"><span class="keyword">class</span>:</span> logging.handlers.RotatingFileHandler</span><br><span class="line">    level: ERROR</span><br><span class="line">    formatter: simple</span><br><span class="line">    filename: error.log</span><br><span class="line">    maxBytes: <span class="number">10485760</span></span><br><span class="line">    backupCount: <span class="number">20</span></span><br><span class="line">    encoding: utf8</span><br><span class="line">loggers:</span><br><span class="line">  main.core:</span><br><span class="line">    level: DEBUG</span><br><span class="line">    handlers: [console, file, error]</span><br><span class="line">root:</span><br><span class="line">  level: DEBUG</span><br><span class="line">  handlers: [console]</span><br></pre></td></tr></table></figure>
<h3 id="定义一个主入口文件"><a href="#定义一个主入口文件" class="headerlink" title="定义一个主入口文件"></a>定义一个主入口文件</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 文件名：main.py</span></span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">import</span> core</span><br><span class="line"><span class="keyword">import</span> yaml</span><br><span class="line"><span class="keyword">import</span> logging.config</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">setup_logging</span><span class="params">(default_path=<span class="string">'config.yaml'</span>, default_level=logging.INFO)</span>:</span></span><br><span class="line">    path = default_path</span><br><span class="line">    <span class="keyword">if</span> os.path.exists(path):</span><br><span class="line">        <span class="keyword">with</span> open(path, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">            config = yaml.load(f)</span><br><span class="line">            logging.config.dictConfig(config)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        logging.basicConfig(level=default_level)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log</span><span class="params">()</span>:</span></span><br><span class="line">    logging.debug(<span class="string">'Start'</span>)</span><br><span class="line">    logging.info(<span class="string">'Exec'</span>)</span><br><span class="line">    logging.info(<span class="string">'Finished'</span>)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    yaml_path = <span class="string">'config.yaml'</span></span><br><span class="line">    setup_logging(yaml_path)</span><br><span class="line">    log()</span><br><span class="line">    core.run()</span><br><span class="line"><span class="comment">#这里我们定义了一个 setup_logging() 方法，里面读取了 yaml 文件的配置，然后通过 dictConfig() 方法将配置项传给了 logging 模块进行全局初始化</span></span><br></pre></td></tr></table></figure>
<h3 id="这个模块还引入了另外一个模块-core"><a href="#这个模块还引入了另外一个模块-core" class="headerlink" title="这个模块还引入了另外一个模块 core"></a>这个模块还引入了另外一个模块 core</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 文件名：core.py</span></span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"> </span><br><span class="line">logger = logging.getLogger(<span class="string">'main.core'</span>)</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">()</span>:</span></span><br><span class="line">    logger.info(<span class="string">'Core Info'</span>)</span><br><span class="line">    logger.debug(<span class="string">'Core Debug'</span>)</span><br><span class="line">    logger.error(<span class="string">'Core Error'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="控制台运行结果输出"><a href="#控制台运行结果输出" class="headerlink" title="控制台运行结果输出"></a>控制台运行结果输出</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2018</span><span class="number">-06</span><span class="number">-03</span> <span class="number">17</span>:<span class="number">07</span>:<span class="number">12</span>,<span class="number">727</span> - Exec</span><br><span class="line"><span class="number">2018</span><span class="number">-06</span><span class="number">-03</span> <span class="number">17</span>:<span class="number">07</span>:<span class="number">12</span>,<span class="number">727</span> - Finished</span><br><span class="line"><span class="number">2018</span><span class="number">-06</span><span class="number">-03</span> <span class="number">17</span>:<span class="number">07</span>:<span class="number">12</span>,<span class="number">727</span> - Core Info</span><br><span class="line"><span class="number">2018</span><span class="number">-06</span><span class="number">-03</span> <span class="number">17</span>:<span class="number">07</span>:<span class="number">12</span>,<span class="number">727</span> - Core Info</span><br><span class="line"><span class="number">2018</span><span class="number">-06</span><span class="number">-03</span> <span class="number">17</span>:<span class="number">07</span>:<span class="number">12</span>,<span class="number">728</span> - Core Error</span><br><span class="line"><span class="number">2018</span><span class="number">-06</span><span class="number">-03</span> <span class="number">17</span>:<span class="number">07</span>:<span class="number">12</span>,<span class="number">728</span> - Core Error</span><br></pre></td></tr></table></figure>
<h3 id="在-debug-log-文件中则包含了-core-py-的运行结果"><a href="#在-debug-log-文件中则包含了-core-py-的运行结果" class="headerlink" title="在 debug.log 文件中则包含了 core.py 的运行结果"></a>在 debug.log 文件中则包含了 core.py 的运行结果</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2018</span><span class="number">-06</span><span class="number">-03</span> <span class="number">17</span>:<span class="number">07</span>:<span class="number">12</span>,<span class="number">727</span> - main.core - INFO - Core Info</span><br><span class="line"><span class="number">2018</span><span class="number">-06</span><span class="number">-03</span> <span class="number">17</span>:<span class="number">07</span>:<span class="number">12</span>,<span class="number">727</span> - main.core - DEBUG - Core Debug</span><br><span class="line"><span class="number">2018</span><span class="number">-06</span><span class="number">-03</span> <span class="number">17</span>:<span class="number">07</span>:<span class="number">12</span>,<span class="number">728</span> - main.core - ERROR - Core Error</span><br></pre></td></tr></table></figure>
<h2 id="对logging模块进行封装"><a href="#对logging模块进行封装" class="headerlink" title="对logging模块进行封装"></a>对logging模块进行封装</h2><h3 id="创建目录"><a href="#创建目录" class="headerlink" title="创建目录"></a>创建目录</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@RedHat_test log]<span class="comment"># ls</span></span><br><span class="line">bin  lib  logs</span><br><span class="line"><span class="comment"># bin里面有主函数main.py</span></span><br><span class="line"><span class="comment"># lib里面有log.py</span></span><br></pre></td></tr></table></figure>
<h3 id="展现代码"><a href="#展现代码" class="headerlink" title="展现代码"></a>展现代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># log.py</span></span><br><span class="line">[root@RedHat_test lib]<span class="comment"># cat log.py</span></span><br><span class="line"><span class="comment">#coding=utf-8</span></span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">from</span> logging.handlers <span class="keyword">import</span> TimedRotatingFileHandler</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">initlog</span><span class="params">(log_file,loglevel,rotat=True)</span>:</span></span><br><span class="line">    <span class="keyword">global</span>  logger</span><br><span class="line">    <span class="comment">#生成一个日志对象</span></span><br><span class="line">    logger = logging.getLogger()</span><br><span class="line">    logger.setLevel(loglevel)</span><br><span class="line">    <span class="keyword">if</span> loglevel <span class="keyword">is</span> logging.DEBUG:</span><br><span class="line">        formatter = logging.Formatter(<span class="string">'%(asctime)s  %(levelname)s %(threadName)s  %(funcName)s  %(lineno)d %(message)s '</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        formatter = logging.Formatter(<span class="string">'%(asctime)s  %(levelname)s %(threadName)s [%(funcName)s] %(message)s '</span>)</span><br><span class="line">    <span class="comment"># Create a file handler to store error messages</span></span><br><span class="line">    <span class="comment">#fhdr = logging.FileHandler(log_file)</span></span><br><span class="line">    <span class="keyword">if</span> rotat:</span><br><span class="line">        <span class="comment">#fhdr =  TimedRotatingFileHandler(log_file,when='midnight',backupCount=3000)</span></span><br><span class="line">        <span class="comment">#fhdr.suffix= "%Y%m%d"</span></span><br><span class="line">        fhdr =  TimedRotatingFileHandler(log_file,when=<span class="string">'D'</span>,interval=<span class="number">1</span>,backupCount=<span class="number">200</span>)</span><br><span class="line">        fhdr.suffix= <span class="string">"%Y-%m-%d.log"</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        fhdr = logging.FileHandler(log_file)</span><br><span class="line">    fhdr.setFormatter(formatter)</span><br><span class="line">    <span class="comment"># Create a stream handler to print all messages to console </span></span><br><span class="line">    chdr = logging.StreamHandler()</span><br><span class="line">    chdr.setFormatter(formatter)</span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    logger.addHandler(fhdr)</span><br><span class="line">    logger.addHandler(chdr)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># main.py</span></span><br><span class="line">[root@RedHat_test bin]<span class="comment"># cat main.py </span></span><br><span class="line"><span class="comment">#! /usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> sys,os,string,inspect</span><br><span class="line">sys.path.append(os.path.join(os.path.dirname(os.path.dirname(os.path.abspath(__file__))),<span class="string">'lib'</span>))</span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">import</span> log</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line">logger = logging.getLogger()</span><br><span class="line"></span><br><span class="line">logfile=os.path.join(<span class="string">'/root/log/logs'</span>,<span class="string">'dyscripty.log'</span>)</span><br><span class="line">loglevel=logging.INFO</span><br><span class="line">log.initlog(logfile, loglevel)</span><br><span class="line"></span><br><span class="line">a = <span class="string">'123456789'</span></span><br><span class="line">logger.info(a)</span><br></pre></td></tr></table></figure>
<h3 id="展示效果"><a href="#展示效果" class="headerlink" title="展示效果"></a>展示效果</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@RedHat_test bin]<span class="comment"># python main.py </span></span><br><span class="line"><span class="number">2020</span><span class="number">-02</span><span class="number">-25</span> <span class="number">15</span>:<span class="number">14</span>:<span class="number">33</span>,<span class="number">596</span>  INFO MainThread [&lt;module&gt;] <span class="number">123456789</span> </span><br><span class="line">[root@RedHat_test logs]<span class="comment"># cat dyscripty.log </span></span><br><span class="line"><span class="number">2020</span><span class="number">-02</span><span class="number">-25</span> <span class="number">15</span>:<span class="number">14</span>:<span class="number">33</span>,<span class="number">596</span>  INFO MainThread [&lt;module&gt;] <span class="number">123456789</span></span><br></pre></td></tr></table></figure>
<h2 id="Django中的日志配置"><a href="#Django中的日志配置" class="headerlink" title="Django中的日志配置"></a>Django中的日志配置</h2><h3 id="Django的日志在-your-project-name-settings-py文件中配置"><a href="#Django的日志在-your-project-name-settings-py文件中配置" class="headerlink" title="Django的日志在/your_project_name/settings.py文件中配置"></a>Django的日志在/your_project_name/settings.py文件中配置</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  log  首先创建日志存储路径.</span></span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">import</span> django.utils.log</span><br><span class="line"><span class="keyword">import</span> logging.handlers</span><br><span class="line"> </span><br><span class="line">log_path = os.path.join(BASE_DIR, <span class="string">"logs"</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(log_path):</span><br><span class="line">    os.makedirs(<span class="string">"logs"</span>)</span><br><span class="line"><span class="comment"># DJANGO_LOG_LEVEL=DEBUG</span></span><br><span class="line"> </span><br><span class="line">LOGGING = &#123;</span><br><span class="line">    <span class="string">'version'</span>: <span class="number">1</span>,  <span class="comment"># 保留字</span></span><br><span class="line">    <span class="string">'disable_existing_loggers'</span>: <span class="literal">False</span>,  <span class="comment"># 禁用已经存在的logger实例</span></span><br><span class="line">    <span class="comment"># 日志文件的格式</span></span><br><span class="line">    <span class="string">'formatters'</span>: &#123;</span><br><span class="line">        <span class="comment"># 详细的日志格式</span></span><br><span class="line">        <span class="string">'standard'</span>: &#123;</span><br><span class="line">            <span class="string">'format'</span>: <span class="string">'[%(asctime)s][%(threadName)s:%(thread)d][task_id:%(name)s][%(filename)s:%(lineno)d]'</span></span><br><span class="line">                      <span class="string">'[%(levelname)s][%(message)s]'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment"># 简单的日志格式</span></span><br><span class="line">        <span class="string">'simple'</span>: &#123;</span><br><span class="line">            <span class="string">'format'</span>: <span class="string">'[%(levelname)s][%(asctime)s][%(filename)s:%(lineno)d]%(message)s'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment"># 定义一个特殊的日志格式</span></span><br><span class="line">        <span class="string">'collect'</span>: &#123;</span><br><span class="line">            <span class="string">'format'</span>: <span class="string">'%(message)s'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment"># 过滤器</span></span><br><span class="line">    <span class="string">'filters'</span>: &#123;</span><br><span class="line">        <span class="string">'require_debug_true'</span>: &#123;</span><br><span class="line">            <span class="string">'()'</span>: <span class="string">'django.utils.log.RequireDebugTrue'</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment"># 处理器</span></span><br><span class="line">    <span class="string">'handlers'</span>: &#123;</span><br><span class="line">        <span class="string">'console'</span>: &#123;     <span class="comment"># 在终端打印</span></span><br><span class="line">            <span class="string">'level'</span>: <span class="string">'DEBUG'</span>,</span><br><span class="line">            <span class="string">'filters'</span>: [<span class="string">'require_debug_true'</span>],  <span class="comment"># 只有在Django debug为True时才在屏幕打印日志</span></span><br><span class="line">            <span class="string">'class'</span>: <span class="string">'logging.StreamHandler'</span>,  <span class="comment">#</span></span><br><span class="line">            <span class="string">'formatter'</span>: <span class="string">'simple'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">'default'</span>: &#123;    <span class="comment"># 默认的</span></span><br><span class="line">            <span class="string">'level'</span>: <span class="string">'INFO'</span>,</span><br><span class="line">            <span class="string">'class'</span>: <span class="string">'logging.handlers.RotatingFileHandler'</span>,  <span class="comment"># 保存到文件，自动切</span></span><br><span class="line">            <span class="string">'filename'</span>: os.path.join(BASE_DIR+<span class="string">'/logs/'</span>, <span class="string">"all.log"</span>),  <span class="comment"># 日志文件</span></span><br><span class="line">            <span class="string">'maxBytes'</span>: <span class="number">1024</span> * <span class="number">1024</span> * <span class="number">50</span>,                    <span class="comment"># 日志大小 50M</span></span><br><span class="line">            <span class="string">'backupCount'</span>: <span class="number">3</span>,                                <span class="comment"># 最多备份几个</span></span><br><span class="line">            <span class="string">'formatter'</span>: <span class="string">'standard'</span>,</span><br><span class="line">            <span class="string">'encoding'</span>: <span class="string">'utf-8'</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">'error'</span>: &#123;   <span class="comment"># 专门用来记错误日志</span></span><br><span class="line">            <span class="string">'level'</span>: <span class="string">'ERROR'</span>,</span><br><span class="line">            <span class="string">'class'</span>: <span class="string">'logging.handlers.RotatingFileHandler'</span>,  <span class="comment"># 保存到文件，自动切</span></span><br><span class="line">            <span class="string">'filename'</span>: os.path.join(BASE_DIR+<span class="string">'/logs/'</span>, <span class="string">"error.log"</span>),  <span class="comment"># 日志文件</span></span><br><span class="line">            <span class="string">'maxBytes'</span>: <span class="number">1024</span> * <span class="number">1024</span> * <span class="number">50</span>,  <span class="comment"># 日志大小 50M</span></span><br><span class="line">            <span class="string">'backupCount'</span>: <span class="number">5</span>,</span><br><span class="line">            <span class="string">'formatter'</span>: <span class="string">'standard'</span>,</span><br><span class="line">            <span class="string">'encoding'</span>: <span class="string">'utf-8'</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">'collect'</span>: &#123;   <span class="comment"># 专门定义一个收集特定信息的日志</span></span><br><span class="line">            <span class="string">'level'</span>: <span class="string">'INFO'</span>,</span><br><span class="line">            <span class="string">'class'</span>: <span class="string">'logging.handlers.RotatingFileHandler'</span>,  <span class="comment"># 保存到文件，自动切</span></span><br><span class="line">            <span class="string">'filename'</span>: os.path.join(BASE_DIR+<span class="string">'/logs/'</span>, <span class="string">"collect.log"</span>),</span><br><span class="line">            <span class="string">'maxBytes'</span>: <span class="number">1024</span> * <span class="number">1024</span> * <span class="number">50</span>,  <span class="comment"># 日志大小 50M</span></span><br><span class="line">            <span class="string">'backupCount'</span>: <span class="number">5</span>,</span><br><span class="line">            <span class="string">'formatter'</span>: <span class="string">'collect'</span>,</span><br><span class="line">            <span class="string">'encoding'</span>: <span class="string">"utf-8"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">'scprits_handler'</span>: &#123;</span><br><span class="line">            <span class="string">'level'</span>:<span class="string">'DEBUG'</span>,</span><br><span class="line">            <span class="string">'class'</span>:<span class="string">'logging.handlers.RotatingFileHandler'</span>,</span><br><span class="line">            <span class="string">'filename'</span>: os.path.join(BASE_DIR+<span class="string">'/logs/'</span>, <span class="string">"script.log"</span>),</span><br><span class="line">            <span class="string">'maxBytes'</span>: <span class="number">1024</span>*<span class="number">1024</span>*<span class="number">5</span>,</span><br><span class="line">            <span class="string">'backupCount'</span>: <span class="number">5</span>,</span><br><span class="line">            <span class="string">'formatter'</span>:<span class="string">'standard'</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">'loggers'</span>: &#123;</span><br><span class="line">        <span class="string">'django'</span>: &#123;             <span class="comment"># 默认的logger应用如下配置</span></span><br><span class="line">            <span class="string">'handlers'</span>: [<span class="string">'default'</span>, <span class="string">'console'</span>, <span class="string">'error'</span>],  <span class="comment"># 上线之后可以把'console'移除</span></span><br><span class="line">            <span class="string">'level'</span>: <span class="string">'DEBUG'</span>,</span><br><span class="line">            <span class="string">'propagate'</span>: <span class="literal">True</span>,  <span class="comment"># 向不向更高级别的logger传递</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">'collect'</span>: &#123;      <span class="comment"># 名为 'collect'的logger还单独处理</span></span><br><span class="line">            <span class="string">'handlers'</span>: [<span class="string">'console'</span>, <span class="string">'collect'</span>],</span><br><span class="line">            <span class="string">'level'</span>: <span class="string">'INFO'</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">'scripts'</span>: &#123;</span><br><span class="line">            <span class="string">'handlers'</span>: [<span class="string">'scprits_handler'</span>],</span><br><span class="line">            <span class="string">'level'</span>: <span class="string">'INFO'</span>,</span><br><span class="line">            <span class="string">'propagate'</span>: <span class="literal">False</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="此配置的三个部分"><a href="#此配置的三个部分" class="headerlink" title="此配置的三个部分"></a>此配置的三个部分</h3><p>formatters: 指定输出的格式，被handler使用。</p>
<p>handlers： 指定输出到控制台还是文件中，以及输出的方式。被logger引用。</p>
<p>loggers： 指定django中的每个模块使用哪个handlers。以及日志输出的级别。</p>
<p>注意：日志的输出级别是由loggers中的每个模块中level选项定义。如果没有配置，那么默认为warning级别。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">handlers与loggers都存在level，两者不同：</span><br><span class="line"><span class="number">1</span>、loggers中的level表示可以接受的错误级别，就是说loggers接受level或者比level更高级别的错误，由propagate决定:propagate为<span class="literal">True</span>, 则向上传播；</span><br><span class="line"><span class="number">2</span>、handlers的level表示日志级别</span><br></pre></td></tr></table></figure>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging </span><br><span class="line">logger = logging.getLogger(<span class="string">'django'</span>)</span><br><span class="line">logger.info(<span class="string">'-------------------------'</span>)</span><br><span class="line">logger.error(str(e))</span><br><span class="line">logger.warn(<span class="string">'warn'</span>)</span><br><span class="line">logger.debug(<span class="string">'debug'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h3><p><img src="640-1.jpeg" alt="python-日志处理"></p>

                
                <hr>
                <!-- Pager -->
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2020/03/09/docker-nextcloud搭建私有同步网盘/" data-toggle="tooltip" data-placement="top" title="docker—nextcloud搭建私有同步网盘">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2020/03/09/sar-性能监控命令/" data-toggle="tooltip" data-placement="top" title="sar—性能监控命令">Next Post &rarr;</a>
                    </li>
                    
                </ul>

                <!-- tip start -->
                

                
                <div class="comment_notes">
                    <p>
                        This is copyright.
                    </p>
                </div>
                
                <!-- tip end -->

                <!-- Music start-->
                
                

<link rel="stylesheet" href="/css/music-player/fonts/iconfont.css">


<link rel="stylesheet" href="/css/music-player/css/reset.css">


<link rel="stylesheet" href="/css/music-player/css/player.css">



<div class="music-player">
    <audio class="music-player__audio" ></audio>
    <div class="music-player__main">
        <div class="music-player__blur"></div>
        <div class="music-player__disc">
            <div class="music-player__image">
                <img width="100%" src="" alt="">
            </div>
            <div class="music-player__pointer"><img width="100%" src="/img/cd_tou.png" alt=""></div>
        </div>
        <div class="music-player__controls">
            <div class="music__info">
                <h3 class="music__info--title">...</h3>
                <p class="music__info--singer">...</p>
            </div>
            <div class="player-control">
                <div class="player-control__content">
                    <div class="player-control__btns">
                        <div class="player-control__btn player-control__btn--prev"><i class="iconfont icon-prev"></i></div>
                        <div class="player-control__btn player-control__btn--play"><i class="iconfont icon-play"></i></div>
                        <div class="player-control__btn player-control__btn--next"><i class="iconfont icon-next"></i></div>
                        <div class="player-control__btn player-control__btn--mode"><i class="iconfont icon-loop"></i></div>
                    </div>
                    <div class="player-control__volume">
                        <div class="control__volume--icon player-control__btn"><i class="iconfont icon-volume"></i></div>
                        <div class="control__volume--progress player_progress"></div>
                    </div>
                </div>
                <div class="player-control__content">
                    <div class="player__song--progress player_progress"></div>
                    <div class="player__song--timeProgess nowTime">00:00</div>
                    <div class="player__song--timeProgess totalTime">00:00</div>
                </div>

            </div>

        </div>
    </div>
</div>


<script src="/js/music-player/utill.js"></script>


<script src="/js/music-player/jquery.min.js"></script>


<script src="/js/music-player/player.js"></script>


                
                <!-- Music end -->

                <!-- Sharing -->
                
                <div class="social-share"  data-wechat-qrcode-helper="" align="center"></div>
                <!--  css & js -->
                <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
                <script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
                
                <!-- Sharing -->

                <!-- gitment start -->
                
                <!-- gitment end -->

                <!-- 来必力City版安装代码 -->
                
                <!-- City版安装代码已完成 -->

                <!-- disqus comment start -->
                
                <!-- disqus comment end -->
            </div>
            
            <!-- Tabe of Content -->
            <!-- Table of Contents -->

    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#简介"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">简介</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#作用"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">作用</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Logging工作流程"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">Logging工作流程</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#logging模块使用过程"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">logging模块使用过程</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#logging模块处理流程"><span class="toc-nav-number">3.2.</span> <span class="toc-nav-text">logging模块处理流程</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#日志等级"><span class="toc-nav-number">4.</span> <span class="toc-nav-text">日志等级</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#日志格式允许的字段"><span class="toc-nav-number">5.</span> <span class="toc-nav-text">日志格式允许的字段</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#简单应用"><span class="toc-nav-number">6.</span> <span class="toc-nav-text">简单应用</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#基本用法"><span class="toc-nav-number">7.</span> <span class="toc-nav-text">基本用法</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#灵活配置日志格式（多次运行会被覆盖）"><span class="toc-nav-number">8.</span> <span class="toc-nav-text">灵活配置日志格式（多次运行会被覆盖）</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#logging库Formatter组件"><span class="toc-nav-number">9.</span> <span class="toc-nav-text">logging库Formatter组件</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#创建两个logger对象"><span class="toc-nav-number">10.</span> <span class="toc-nav-text">创建两个logger对象</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#写入配置文件"><span class="toc-nav-number">11.</span> <span class="toc-nav-text">写入配置文件</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#定义一个-yaml-配置文件"><span class="toc-nav-number">11.1.</span> <span class="toc-nav-text">定义一个 yaml 配置文件</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#定义一个主入口文件"><span class="toc-nav-number">11.2.</span> <span class="toc-nav-text">定义一个主入口文件</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#这个模块还引入了另外一个模块-core"><span class="toc-nav-number">11.3.</span> <span class="toc-nav-text">这个模块还引入了另外一个模块 core</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#控制台运行结果输出"><span class="toc-nav-number">11.4.</span> <span class="toc-nav-text">控制台运行结果输出</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#在-debug-log-文件中则包含了-core-py-的运行结果"><span class="toc-nav-number">11.5.</span> <span class="toc-nav-text">在 debug.log 文件中则包含了 core.py 的运行结果</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#对logging模块进行封装"><span class="toc-nav-number">12.</span> <span class="toc-nav-text">对logging模块进行封装</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#创建目录"><span class="toc-nav-number">12.1.</span> <span class="toc-nav-text">创建目录</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#展现代码"><span class="toc-nav-number">12.2.</span> <span class="toc-nav-text">展现代码</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#展示效果"><span class="toc-nav-number">12.3.</span> <span class="toc-nav-text">展示效果</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Django中的日志配置"><span class="toc-nav-number">13.</span> <span class="toc-nav-text">Django中的日志配置</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Django的日志在-your-project-name-settings-py文件中配置"><span class="toc-nav-number">13.1.</span> <span class="toc-nav-text">Django的日志在&#x2F;your_project_name&#x2F;settings.py文件中配置</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#此配置的三个部分"><span class="toc-nav-number">13.2.</span> <span class="toc-nav-text">此配置的三个部分</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#使用"><span class="toc-nav-number">13.3.</span> <span class="toc-nav-text">使用</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#效果图"><span class="toc-nav-number">13.4.</span> <span class="toc-nav-text">效果图</span></a></li></ol></li></ol>
        
        </div>
      </aside>
    

                
            <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#Linux_python" title="Linux_python">Linux_python</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
                <hr>
                <h5>FRIENDS</h5>
                <ul class="list-inline">

                    
                        <li><a href="https://blog.csdn.net/yunweimao" target="_blank">Dusign&#39;s Huqi</a></li>
                    
                        <li><a href="#" target="_blank">Dusign&#39;s Web</a></li>
                    
                        <li><a href="https://github.com/huqi2020" target="_blank">Dusign&#39;s Github</a></li>
                    
                        <li><a href="#" target="_blank">Other</a></li>
                    
                </ul>
                
            </div>
        </div>
    </div>
</article>




<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'left',
          icon: 'ℬ'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>


<style  type="text/css">
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">

                
                    <li>
                        <a target="_blank"  href="https://github.com/huqi2020">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="https://twitter.com/Hu Qi">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="https://www.facebook.com/Hu Qi">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="https://www.zhihu.com/people/qi-qi-8-34-58">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa  fa-stack-1x fa-inverse">知</i>
                            </span>
                        </a>
                    </li>
                

                

                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; (IT-胡齐) 2020 
                    <br>
                    Powered by 
                    <a href="https://github.com/dusign/hexo-theme-snail" target="_blank" rel="noopener">
                        <i>hexo-theme-snail</i>
                    </a> | 
                    <iframe style="margin-left: 2px; margin-bottom:-5px;" frameborder="0" scrolling="0"
                        width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=dusign&repo=hexo-theme-snail&type=star&count=true">
                    </iframe>
                </p>
            </div>
        </div>
    </div>

</footer>

<!-- jQuery -->

<script src="/js/jquery.min.js"></script>


<!-- Bootstrap Core JavaScript -->

<script src="/js/bootstrap.min.js"></script>


<!-- Custom Theme JavaScript -->

<script src="/js/hux-blog.min.js"></script>


<!-- Search -->

<script src="/js/search.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("https://dusign.net/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->


<script>
    // dynamic User by Hux
    var _gaId = 'UA-XXXXXXXX-X';
    var _gaDomain = 'yoursite';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>




<!-- Baidu Tongji -->


<!-- Search -->

    <script type="text/javascript">      
        var search_path = "search.xml";
        if (search_path.length == 0) {
            search_path = "search.xml";
        }
    var path = "/" + search_path;
    searchFunc(path, 'local-search-input', 'local-search-result');
    </script>


<!-- busuanzi -->
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>






	<a id="rocket" href="#top" class=""></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>

    
        <!-- background effects line -->
        

        
            <script type="text/javascript" src="/js/mouse-click.js" content='[&quot;🌱&quot;,&quot;just do it&quot;,&quot;🍀&quot;]' color='[&quot;rgb(121,93,179)&quot; ,&quot;rgb(76,180,231)&quot; ,&quot;rgb(184,90,154)&quot;]'></script>
        

        <!-- background effects end -->
    

    <!--<script size="50" alpha='0.3' zIndex="-999" src="/js/ribbonStatic.js"></script>-->
    
        <script src="/js/ribbonDynamic.js"></script>
    
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>

</html>
